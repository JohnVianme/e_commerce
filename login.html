<!DOCTYPE html>
<html>
	<head>
		<title>Login</title>
		<script>
			function sendReq(url){
				var username = document.getElementById('username').value
				var password = document.getElementById('password').value
				var acctType = document.querySelectorAll('.type')
				console.log(`username: ${username}, password: ${password}`)
				let selectedValue = null
				
				for (var radios of acctType){
					if(radios.checked){
						selectedValue = radios.id
						break
					}
				}
				if (selectedValue){
					console.log('from login.html')
					console.log(selectedValue)
					if (selectedValue == 'customer_type'){
						acctType = 'customer'
					}else{
						acctType = 'seller'
					}
				} else {
					console.log('No button seleced')
				}
				console.log(`acct_type: ${acctType}`)
				var body = {}
				if (username != null){
					body = {'username': username, 'password': password, 
							'acct_type': acctType}
				}
				fetch(url, {
					'method':'post',
					'headers':{'Content-Type':'application/json'},
					'body': JSON.stringify(body)
				})
				.then((res)=>{
					return res.text()
				})
				.then((text)=>{
					document.open()
					document.write(text)
					document.close()
				})
				.catch((err)=>{
					console.log(err)
				})
			}
		</script>
	</head>
	<body>
		<header>
			<h1>Login</h1>
		</header>
		<nav>
			<a href="home">Home</a>
			<a href="#">About</a>
			<a href="#">Contact</a>
			<a href="login">Login</a>
		</nav>
		<form method="post">
			<label for="username">
				Username: <input type="text" name="username" id="username">
			</label><br>
			<label for="password">
				Password: <input type="password" name="password" id="password">
			</label><br>
			Account type:
				<label for="customer_type">
				Customer <input type="radio" name="acct_type" id="customer_type" class="type">
				</label>
				<label for="seller_type">
				Seller <input type="radio" name="acct_type" id="seller_type" class="type">
				</label><br>
			<input type="button" value="Login" onclick="sendReq('lgn_action')">
			<input type="button" value="Create New Accout" onclick="sendReq('create_acct')">
		</form>
	</body>
</html>