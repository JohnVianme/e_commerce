<!DOCTYPE html>
<html>
	<head>
		<title>Home</title>
		<script>
			function initPage(){
				var list = document.querySelector('ul')
				list.innerHTML = ''
				fetch('/sellers',{method:'get'})
				.then((res)=>{
					return res.json()
				})
				.then((sellers)=>{
					if(sellers.length == 0){
						list.innerHTML = '<li>No sellers available yet.</li>'
						return
					}
					for (var i = 0; i < sellers.length; i++){
						var seller = sellers[i]
						var li = document.createElement('li')
						var a = document.createElement('a')
						
						a.href = '/seller/'+ encodeURIComponent(seller.username)
						a.innerText = seller.username + "'s Store"
						li.appendChild(a)
						list.appendChild(li)
					}
				})
				.catch((err)=>{
					console.log(err)
					list.innerHTML = '<li>Error fetching sellers.</li>'
				})
			}
		</script>
	</head>
	<body onload="initPage()">
		<header>
			<h1>This is our e-comm website.</h1>
		</header>
		<nav>
			<a href="home">Home</a>
			<a href="#">About</a>
			<a href="#">Contact</a>
			<a href="login">Login</a>
		</nav>
		<ul>
			<li>Producers go here</li>
		</ul>
	</body>
</html>
